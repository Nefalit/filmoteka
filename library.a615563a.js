function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},a=n.parcelRequired76b;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in l){var n=l[e];delete l[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){l[e]=n},n.parcelRequired76b=a),a("hmaTe"),a("amrNH");var i=a("eWCmQ");a("dYsrf");var r=a("l2kTn"),o=a("2GjMI"),s=a("b5rV1"),c=a("fb9GJ");var d=e(a("amrNH")).template({1:function(e,n,t,l,a){var i,r,o=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"  <li id="+d(typeof(r=null!=(r=u(t,"id")||(null!=n?u(n,"id"):n))?r:s)===c?r.call(o,{name:"id",hash:{},data:a,loc:{start:{line:2,column:9},end:{line:2,column:15}}}):r)+" class='gallery-library__card'>\n    <img\n      class='gallery-library__img'\n"+(null!=(i=u(t,"if").call(o,null!=n?u(n,"poster_path"):n,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a,loc:{start:{line:5,column:6},end:{line:9,column:13}}}))?i:"")+"      alt="+d(typeof(r=null!=(r=u(t,"title")||(null!=n?u(n,"title"):n))?r:s)===c?r.call(o,{name:"title",hash:{},data:a,loc:{start:{line:10,column:10},end:{line:10,column:19}}}):r)+"\n    />\n    <div class='gallery-library__info-wrap'>\n      <p class='gallery-library__name'>"+d(typeof(r=null!=(r=u(t,"title")||(null!=n?u(n,"title"):n))?r:s)===c?r.call(o,{name:"title",hash:{},data:a,loc:{start:{line:13,column:39},end:{line:13,column:48}}}):r)+"</p>\n      <div class='gallery-library__info'>\n"+(null!=(i=u(t,"if").call(o,null!=n?u(n,"genre_ids"):n,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.program(8,a,0),data:a,loc:{start:{line:15,column:8},end:{line:19,column:15}}}))?i:"")+"            |\n            "+d((u(t,"getYear")||n&&u(n,"getYear")||s).call(o,null!=n?u(n,"release_date"):n,{name:"getYear",hash:{},data:a,loc:{start:{line:21,column:12},end:{line:21,column:36}}}))+"</span>\n        <span class='gallery-library__rating'>"+d(typeof(r=null!=(r=u(t,"vote_average")||(null!=n?u(n,"vote_average"):n))?r:s)===c?r.call(o,{name:"vote_average",hash:{},data:a,loc:{start:{line:22,column:46},end:{line:22,column:62}}}):r)+"</span>\n      </div>\n    </div>\n  </li>\n"},2:function(e,n,t,l,a){var i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"      src='"+e.escapeExpression((i(t,"getPosterUrl")||n&&i(n,"getPosterUrl")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},null!=n?i(n,"poster_path"):n,{name:"getPosterUrl",hash:{},data:a,loc:{start:{line:6,column:11},end:{line:6,column:39}}}))+"'\n"},4:function(e,n,t,l,a){return"      src='https://papik.pro/uploads/posts/2021-12/thumbs/1639228118_1-papik-pro-p-kino-klipart-1.jpg'\n"},6:function(e,n,t,l,a){var i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <span class='gallery-library__genre'>"+e.escapeExpression((i(t,"getShortGenres")||n&&i(n,"getShortGenres")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},null!=n?i(n,"genre_ids"):n,{name:"getShortGenres",hash:{},data:a,loc:{start:{line:16,column:45},end:{line:16,column:73}}}))+"\n"},8:function(e,n,t,l,a){return"        <span class='gallery-library__genre'>Жанр невідомий\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,a){var i;return null!=(i=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:26,column:9}}}))?i:""},useData:!0});s=a("b5rV1"),o=a("2GjMI");const u=document.querySelector(".gallery-library__list"),m=document.querySelector(".js-btn-watched"),p=document.querySelector(".js-btn-queue"),f=document.querySelector("#pagination"),g=document.querySelector(".lib__empty");let v="queue";function _(e){u.innerHTML="",u.insertAdjacentHTML("beforeend",d(e))}m.addEventListener("click",L);let y=1,h=0,E=20;function L(){m.classList.add("btn--active"),m.classList.remove("btn--bright"),p.classList.add("btn--bright"),p.classList.remove("btn--active"),v="watched",f.classList.add("visually-hidden"),g.classList.add("visually-hidden");const n=(0,s.load)(o.WATCHED_PAGE_FILMS);if(void 0===n||!n.length)return u.innerHTML="",void g.classList.remove("visually-hidden");if(_(n.slice(h,E)),n&&n.length>20){f.classList.remove("visually-hidden");const t=new(e(c))("pagination",{totalItems:n.length,itemsPerPage:20,visiblePages:5,centerAlign:!0});t.movePageTo(y),t.on("afterMove",(e=>{const n=(0,s.load)(o.WATCHED_PAGE_FILMS);y=e.page,h=20*(y-1),E=h+20,_(n.slice(h,E))}))}else _(n),h=0,y=1,E=20}p.addEventListener("click",M);let b=1,S=0,P=20;function M(){p.classList.add("btn--active"),p.classList.remove("btn--bright"),m.classList.add("btn--bright"),m.classList.remove("btn--active"),v="queue",f.classList.add("visually-hidden"),g.classList.add("visually-hidden");const n=(0,s.load)(o.QUEUE_PAGE_FILMS);if(void 0===n||!n.length)return u.innerHTML="",void g.classList.remove("visually-hidden");if(_(n.slice(S,P)),n&&n.length>20){f.classList.remove("visually-hidden");const t=new(e(c))("pagination",{totalItems:n.length,itemsPerPage:20,visiblePages:5,centerAlign:!0});t.movePageTo(b),t.on("afterMove",(e=>{const n=(0,s.load)(o.QUEUE_PAGE_FILMS);b=e.page,S=20*(b-1),P=S+20,_(n.slice(S,P))}))}else _(n),S=0,b=1,P=20}const I=document.querySelector(".gallery-library__list"),k=document.querySelector(".backdrop"),A=document.querySelector(".modal__info-film"),G=document.querySelector(".modal__button-close-modal");I.addEventListener("click",(function(n){const t=(0,s.load)(o.WATCHED_PAGE_FILMS),l=(0,s.load)(o.QUEUE_PAGE_FILMS);if("UL"===n.target.nodeName)return;const a=Number(n.target.closest(".gallery-library__card").id),c=t&&l?[...t,...l]:t?[...t]:[...l],d=c.findIndex((e=>e.id===a)),u=c[d],m=(0,r.default)(u);A.innerHTML=m,k.classList.remove("visually-hidden"),k.addEventListener("click",y);const p=document.querySelector(".modal__button-watched"),f=document.querySelector(".modal__button-queue");p.addEventListener("click",g),f.addEventListener("click",_),"queue"===v&&(f.textContent="Видалити з черги");"watched"===v&&(p.textContent="Видалити з переглянутих");function g(){if("queue"===v){const e=(0,s.load)(o.QUEUE_PAGE_FILMS),n=e.findIndex((e=>e.id===u.id));e.splice(n,1),localStorage.setItem(o.QUEUE_PAGE_FILMS,JSON.stringify(e)),(0,s.save)(o.WATCHED_PAGE_FILMS,u)}else{const n=(0,s.load)(o.WATCHED_PAGE_FILMS),t=n.findIndex((e=>e.id===u.id));if(-1===t)return void e(i).Notify.failure("Цей фільм вже видалено",{timeout:1e3});n.splice(t,1),localStorage.setItem(o.WATCHED_PAGE_FILMS,JSON.stringify(n)),e(i).Notify.success("Фільм видалено з переглянутих",{timeout:1e3})}}function _(){if("watched"===v){const e=(0,s.load)(o.WATCHED_PAGE_FILMS),n=e.findIndex((e=>e.id===u.id));e.splice(n,1),localStorage.setItem(o.WATCHED_PAGE_FILMS,JSON.stringify(e)),(0,s.save)(o.QUEUE_PAGE_FILMS,u)}else{const n=(0,s.load)(o.QUEUE_PAGE_FILMS),t=n.findIndex((e=>e.id===u.id));if(console.log(t),-1===t)return void e(i).Notify.failure("Цей фільм вже видалено",{timeout:1e3});n.splice(t,1),localStorage.setItem(o.QUEUE_PAGE_FILMS,JSON.stringify(n)),e(i).Notify.success("Фільм видалено з черги",{timeout:1e3})}}function y(e){e.target.classList.contains("backdrop")&&E()}function h(e){"Escape"===e.code&&E()}function E(){"queue"===v?M():L(),k.classList.add("visually-hidden"),G.removeEventListener("click",E),p.removeEventListener("click",g),f.removeEventListener("click",_),document.removeEventListener("keydown",h),k.removeEventListener("click",y)}G.addEventListener("click",E),document.addEventListener("keydown",h)})),M(),a("baGT8");
//# sourceMappingURL=library.a615563a.js.map
